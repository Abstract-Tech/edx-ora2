{% spaceless %}
<div class="wrapper wrapper--xblock wrapper--openassessment theme--basic">
    <div class="openassessment problem" id="openassessment">
        <div class="wrapper--grid">
            <h2 class="openassessment__title problem__header">{{ title }}</h2>

            <nav class="nav--contents">
                <h2 class="title">Skip to a specific step:</h2>

                <ol class="list list--nav">
                    {%  for assessment in rubric_assessments %}
                    <li class="list--nav__item">
                        <a class="action" href="#openassessment__{{ assessment.type }}">{{ assessment.navigation_text }}</a>
                    </li>
                    {% endfor %}
                    <li class="list--nav__item">
                        <a class="action" href="#openassessment__grade">Your grade for this problem</a>
                    </li>
                </ol>
            </nav>

            {% block message %}
            <!-- if the problem is unstarted or response hasn't been submitted -->
            <div id="openassessment__message" class="openassessment__message message">
                <div class="message__content">
                    <p>This problem requires that you work through 3 parts. You can begin by reading the question below and <a data-behavior="ui-scroll" href="#openassessment__response">providing your response</a>.</p>
                </div>
            </div>

            <!-- if the problem is closed and incomplete -->
            <div id="openassessment__message" class="openassessment__message message message--incomplete">
                <h3 class="message__title">This problemâ€™s due date has past and submissions are now closed</h3>
                <div class="message__content">
                    <p>You did not complete the necessary requirements and received <a data-behavior="ui-scroll" href="#openassessment__grade">an incomplete grade</a>.</p>
                </div>
            </div>

            <!-- if response has been submitted -->
            <div id="openassessment__message" class="openassessment__message message">
                <h3 class="message__title">Your Response Has Been Submitted for Peer Assessment</h3>
                <div class="message__content">
                    <p>You still need to complete <a data-behavior="ui-scroll" href="#openassessment__peer-assessment">assessing your peers</a> and <a data-behavior="ui-scroll" href="#openassessment__self-assessment">assessing yourself</a> in order to complete this problem and receive your grade.</p>
                </div>
            </div>

            <!-- if response has been graded -->
            <div id="openassessment__message" class="openassessment__message message">
                <h3 class="message__title">Your Response Has Been Graded</h3>
                <div class="message__content">
                    <p>You still need to complete <a data-behavior="ui-scroll" href="#openassessment__peer-assessment">assessing your peers</a> and <a data-behavior="ui-scroll" href="#openassessment__self-assessment">assessing yourself</a> in order to complete this problem and receive your grade.</p>
                </div>
            </div>

            <!-- if the problem's due date is approaching and tasks remain -->
            <div id="openassessment__message" class="openassessment__message message message--warning">
                <h3 class="message__title">You still need to complete 2 Tasks</h3>
                <div class="message__content">
                    <p>You still need to complete <a data-behavior="ui-scroll" href="#openassessment__peer-assessment">assessing your peers</a> and <a data-behavior="ui-scroll" href="#openassessment__self-assessment">assessing yourself</a> in order to complete this problem and receive your grade.</p>
                </div>
            </div>

            <!-- if no peer assessments remain for student to grade -->
            <div id="openassessment__message" class="openassessment__message message">
                <h3 class="message__title">Awaiting More Peer Responses</h3>
                <div class="message__content">
                    <p>There are currently no responses for you to assess. This should change momentarily. Check back shortly to continue completing this problem. One this and all other steps are completed, you will receive a grade.</p>
                </div>
            </div>

            <!-- if student has completed the entire problem and received a grade -->
            <div id="openassessment__message" class="openassessment__message message message--complete">
                <h3 class="message__title">You have completed this problem</h3>
                <div class="message__content">
                    <p>Review <a data-behavior="ui-scroll" href="#openassessment__grade">your grade and assessment details</a>.</p>
                </div>
            </div>

            <!-- if student has completed the entire problem and not yet received a grade (from peers) -->
            <div id="openassessment__message" class="openassessment__message message message--complete">
                <h3 class="message__title">You have completed this problem</h3>
                <div class="message__content">
                    <p>Your grade should be available shortly once your peers complete their assessments of your response.</p>
                </div>
            </div>
            {% endblock %}

            <div class="wrapper--openassessment__prompt">
                <article class="openassessment__prompt ui-toggle-visibility">

                    <h2 class="openassessment__prompt__title">This Problem's Prompt/Question</h2>

                    <div class="openassessment__prompt__copy ui-toggle-visibility__content">
                        <p>{{ question }}</p>
                    </div>
                </article>
            </div>

            <ol class="openassessment__steps" id="openassessment__steps">
                {% for assessment in rubric_assessments %}
                    <li id="{{ assessment.class_id }}" class="openassessment__steps__step is--loading">
                        <header class="step__header">
                            <h2 class="step__title">
                                <span class="step__counter"></span>
                                <span class="wrapper--copy">
                                    <span class="step__label">{{ assessment.title }}</span>
                                </span>
                            </h2>


                            <span class="step__status">
                                <span class="step__status__label">This step's status:</span>
                                    <span class="step__status__value">
                                        <span class="copy">Loading</span>
                                        <i class="icon-refresh icon-spin"></i>
                                    </span>
                                </span>
                            </span>
                        </header>
                    </li>
                {% endfor %}
            </ol>
        </div>
    </div>
</div>
{% endspaceless %}
